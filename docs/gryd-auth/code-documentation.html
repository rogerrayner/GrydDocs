<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrydAuth - Code Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', monospace;
            overflow-x: auto;
            font-size: 0.875rem;
        }
        .nav-item {
            transition: all 0.3s ease;
        }
        .nav-item:hover {
            background-color: #f3f4f6;
            transform: translateX(4px);
        }
        .nav-item.active {
            background-color: #d1fae5;
            color: #065f46;
            font-weight: 600;
        }
        .method-card {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            background: white;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        .method-card:hover {
            border-color: #10b981;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .parameter {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            padding: 0.5rem;
            margin: 0.25rem 0;
        }
        .return-type {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 0.25rem;
            padding: 0.5rem;
            color: #92400e;
        }
    </style>
</head>
<body class="bg-gray-50 flex">
    <!-- Sidebar Navigation -->
    <nav class="w-80 bg-white shadow-lg min-h-screen fixed overflow-y-auto">
        <div class="p-6">
            <!-- Header -->
            <div class="flex items-center mb-8">
                <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center mr-3">
                    <span class="text-white text-lg font-bold">üìö</span>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Code Docs</h2>
                    <p class="text-xs text-gray-500">Detailed Code Reference</p>
                </div>
            </div>
            
            <div class="space-y-6">
                <!-- API Controllers -->
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-3">üéÆ API Controllers</h3>
                    <div class="space-y-1">
                        <a href="#auth-controller" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md active">
                            üîê AuthController
                        </a>
                        <a href="#users-controller" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üë• UsersController
                        </a>
                        <a href="#roles-controller" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üé≠ RolesController
                        </a>
                        <a href="#permissions-controller" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üîë PermissionsController
                        </a>
                    </div>
                </div>

                <!-- Infrastructure Services -->
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-3">üèóÔ∏è Infrastructure Services</h3>
                    <div class="space-y-1">
                        <a href="#jwt-token-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üé´ JwtTokenService
                        </a>
                        <a href="#password-hash-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üîí PasswordHashService
                        </a>
                        <a href="#rsa-encryption-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üîê RsaEncryptionService
                        </a>
                        <a href="#stateless-refresh-token-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üé´ StatelessRefreshTokenService
                        </a>
                        <a href="#current-user-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üë§ CurrentUserService
                        </a>
                        <a href="#tenant-context-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üè¢ TenantContextService
                        </a>
                        <a href="#redis-cache-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üíæ RedisCacheService
                        </a>
                        <a href="#inmemory-cache-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üì± InMemoryCacheService
                        </a>
                        <a href="#circuit-breaker-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            ‚ö° CircuitBreakerService
                        </a>
                        <a href="#permission-generator-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üîß PermissionGeneratorService
                        </a>
                    </div>
                </div>

                <!-- Application Services -->
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-3">üì± Application Services</h3>
                    <div class="space-y-1">
                        <a href="#claims-builder-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üèóÔ∏è ClaimsBuilderService
                        </a>
                        <a href="#enriched-jwt-token-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            ‚ú® EnrichedJwtTokenService
                        </a>
                        <a href="#jwt-enrichment-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üéØ JwtEnrichmentService
                        </a>
                        <a href="#refresh-token-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üîÑ RefreshTokenService
                        </a>
                        <a href="#zero-trust-security-service" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üõ°Ô∏è ZeroTrustSecurityService
                        </a>
                    </div>
                </div>

                <!-- Domain Entities -->
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-3">üéØ Domain Entities</h3>
                    <div class="space-y-1">
                        <a href="#user-entity" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üë§ User
                        </a>
                        <a href="#role-entity" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üé≠ Role
                        </a>
                        <a href="#permission-entity" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üîë Permission
                        </a>
                        <a href="#tenant-entity" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üè¢ Tenant
                        </a>
                        <a href="#refresh-token-entity" class="nav-item block px-3 py-2 text-sm text-gray-700 rounded-md">
                            üé´ RefreshToken
                        </a>
                    </div>
                </div>
            </div>

            <!-- Back to Main -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <a href="index.html" class="flex items-center text-gray-600 hover:text-gray-800 transition">
                    <span class="mr-2">‚Üê</span>
                    <span class="text-sm">Voltar para GrydAuth</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 ml-80 p-8">
        <!-- Header -->
        <div class="gradient-bg rounded-2xl p-8 mb-8 text-white">
            <h1 class="text-4xl font-bold mb-4">üìö Code Documentation</h1>
            <p class="text-xl opacity-90">Documenta√ß√£o detalhada de todos os m√©todos, classes e interfaces do GrydAuth</p>
        </div>

        <!-- AuthController Documentation -->
        <section class="mb-12" id="auth-controller">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">üîê AuthController</h2>
            
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Vis√£o Geral</h3>
                    <p class="text-gray-600 mb-4">
                        Controller respons√°vel por todas as opera√ß√µes de autentica√ß√£o, incluindo login, logout, refresh de tokens e verifica√ß√£o de sess√µes.
                    </p>
                    <div class="code-block">
<pre>namespace: GrydAuth.API.Controllers
base: ControllerBase
route: api/[controller] (/api/auth)</pre>
                    </div>
                </div>

                <!-- Dependencies -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Depend√™ncias</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="parameter">
                            <strong>IMediator _mediator</strong><br>
                            <span class="text-sm text-gray-600">Media√ß√£o de comandos e queries (CQRS pattern)</span>
                        </div>
                        <div class="parameter">
                            <strong>IEncryptionService _encryptionService</strong><br>
                            <span class="text-sm text-gray-600">Servi√ßo de criptografia RSA</span>
                        </div>
                    </div>
                </div>

                <!-- Methods -->
                <div class="space-y-6">
                    <!-- Login Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üì• Login</h4>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">POST</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Autentica usu√°rio usando email e senha, retornando JWT token e informa√ß√µes do usu√°rio.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Endpoint</h5>
                            <div class="code-block">
<pre>POST /api/auth/login</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="parameter">
                                <strong>LoginCommand command</strong> (FromBody)<br>
                                <span class="text-sm text-gray-600">
                                    ‚Ä¢ Email: string (required)<br>
                                    ‚Ä¢ Password: string (required)<br>
                                    ‚Ä¢ TenantId: Guid? (optional)
                                </span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Retorno</h5>
                            <div class="return-type">
                                <strong>ActionResult&lt;Result&lt;AuthenticationResult&gt;&gt;</strong><br>
                                <span class="text-sm">
                                    ‚Ä¢ IsSuccess: bool<br>
                                    ‚Ä¢ Data: AuthenticationResult (AccessToken, RefreshToken, User, ExpiresAt)<br>
                                    ‚Ä¢ Errors: List&lt;string&gt;
                                </span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Implementa√ß√£o</h5>
                            <div class="code-block">
<pre>[HttpPost("login")]
public async Task&lt;ActionResult&lt;Result&lt;AuthenticationResult&gt;&gt;&gt; Login([FromBody] LoginCommand command)
{
    var result = await _mediator.Send(command);
    
    if (!result.IsSuccess)
    {
        return BadRequest(result);
    }

    return Ok(result);
}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Social Login Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üì± SocialLogin</h4>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">POST</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Autentica usu√°rio atrav√©s de provedores sociais (Google, Facebook, Auth0), validando token externo.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Endpoint</h5>
                            <div class="code-block">
<pre>POST /api/auth/social-login</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="parameter">
                                <strong>SocialLoginCommand command</strong> (FromBody)<br>
                                <span class="text-sm text-gray-600">
                                    ‚Ä¢ Provider: string (Google, Facebook, Auth0)<br>
                                    ‚Ä¢ IdToken: string (JWT do provedor)<br>
                                    ‚Ä¢ TenantId: Guid? (optional)
                                </span>
                            </div>
                        </div>

                        <div class="return-type">
                            <strong>ActionResult&lt;Result&lt;AuthenticationResult&gt;&gt;</strong><br>
                            <span class="text-sm">Mesmo retorno do login tradicional</span>
                        </div>
                    </div>

                    <!-- Refresh Token Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üîÑ RefreshToken</h4>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">POST</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Renova access token usando refresh token v√°lido, mantendo sess√£o ativa sem novo login.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Endpoint</h5>
                            <div class="code-block">
<pre>POST /api/auth/refresh</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="parameter">
                                <strong>RefreshTokenCommand command</strong> (FromBody)<br>
                                <span class="text-sm text-gray-600">
                                    ‚Ä¢ RefreshToken: string (encrypted token)
                                </span>
                            </div>
                        </div>

                        <div class="return-type">
                            <strong>ActionResult&lt;Result&lt;RefreshTokenResult&gt;&gt;</strong><br>
                            <span class="text-sm">
                                ‚Ä¢ AccessToken: string (novo JWT)<br>
                                ‚Ä¢ RefreshToken: string (novo refresh token)<br>
                                ‚Ä¢ ExpiresAt: DateTime
                            </span>
                        </div>
                    </div>

                    <!-- Logout Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üö™ Logout</h4>
                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">POST</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Invalida sess√£o atual, removendo refresh token e adicionando JWT √† blacklist.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Endpoint</h5>
                            <div class="code-block">
<pre>POST /api/auth/logout
Authorization: Bearer {token}</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="parameter">
                                <strong>LogoutCommand command</strong> (FromBody)<br>
                                <span class="text-sm text-gray-600">
                                    ‚Ä¢ RefreshToken: string (para invalida√ß√£o)
                                </span>
                            </div>
                        </div>

                        <div class="return-type">
                            <strong>ActionResult&lt;Result&lt;bool&gt;&gt;</strong><br>
                            <span class="text-sm">Success: true se logout bem-sucedido</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- JwtTokenService Documentation -->
        <section class="mb-12" id="jwt-token-service">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">üé´ JwtTokenService</h2>
            
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Vis√£o Geral</h3>
                    <p class="text-gray-600 mb-4">
                        Servi√ßo de infraestrutura respons√°vel pela gera√ß√£o, valida√ß√£o e gerenciamento de tokens JWT. 
                        Implementa padr√µes de seguran√ßa modernos com suporte a claims customizados.
                    </p>
                    <div class="code-block">
<pre>namespace: GrydAuth.Infrastructure.Services
implements: IJwtTokenService
dependencies: IConfiguration</pre>
                    </div>
                </div>

                <!-- Configuration -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Configura√ß√£o</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="parameter">
                            <strong>_secretKey</strong><br>
                            <span class="text-sm text-gray-600">Chave secreta para assinatura HMAC</span>
                        </div>
                        <div class="parameter">
                            <strong>_issuer</strong><br>
                            <span class="text-sm text-gray-600">Emissor do token (default: GrydAuthenticationFramework)</span>
                        </div>
                        <div class="parameter">
                            <strong>_audience</strong><br>
                            <span class="text-sm text-gray-600">Audi√™ncia do token</span>
                        </div>
                        <div class="parameter">
                            <strong>_expirationMinutes</strong><br>
                            <span class="text-sm text-gray-600">Tempo de expira√ß√£o em minutos (default: 60)</span>
                        </div>
                    </div>
                </div>

                <!-- Methods -->
                <div class="space-y-6">
                    <!-- GenerateToken Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üî® GenerateToken</h4>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Gera um token JWT assinado com todas as informa√ß√µes do usu√°rio, roles e permiss√µes.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>string GenerateToken(
    Guid userId, 
    string email, 
    string fullName, 
    IEnumerable&lt;string&gt; roles, 
    IEnumerable&lt;string&gt; permissions
)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="space-y-2">
                                <div class="parameter">
                                    <strong>Guid userId</strong><br>
                                    <span class="text-sm text-gray-600">ID √∫nico do usu√°rio</span>
                                </div>
                                <div class="parameter">
                                    <strong>string email</strong><br>
                                    <span class="text-sm text-gray-600">Email do usu√°rio</span>
                                </div>
                                <div class="parameter">
                                    <strong>string fullName</strong><br>
                                    <span class="text-sm text-gray-600">Nome completo do usu√°rio</span>
                                </div>
                                <div class="parameter">
                                    <strong>IEnumerable&lt;string&gt; roles</strong><br>
                                    <span class="text-sm text-gray-600">Lista de roles do usu√°rio</span>
                                </div>
                                <div class="parameter">
                                    <strong>IEnumerable&lt;string&gt; permissions</strong><br>
                                    <span class="text-sm text-gray-600">Lista de permiss√µes do usu√°rio</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Retorno</h5>
                            <div class="return-type">
                                <strong>string</strong><br>
                                <span class="text-sm">Token JWT base64 assinado</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Claims Gerados</h5>
                            <div class="code-block">
<pre>‚Ä¢ NameIdentifier: fullName
‚Ä¢ Email: email  
‚Ä¢ Name: fullName
‚Ä¢ Sub: userId.ToString()
‚Ä¢ Jti: Guid.NewGuid()
‚Ä¢ Iat: UnixTimeSeconds
‚Ä¢ Role: roles[] (multiple claims)
‚Ä¢ permission: permissions[] (multiple claims)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Implementa√ß√£o</h5>
                            <div class="code-block">
<pre>public string GenerateToken(Guid userId, string email, string fullName, 
    IEnumerable&lt;string&gt; roles, IEnumerable&lt;string&gt; permissions)
{
    var tokenHandler = new JwtSecurityTokenHandler();
    var key = Encoding.ASCII.GetBytes(_secretKey);
    
    var claims = new List&lt;Claim&gt;
    {
        new(ClaimTypes.NameIdentifier, fullName),
        new(ClaimTypes.Email, email),
        new(ClaimTypes.Name, fullName),
        new(JwtRegisteredClaimNames.Sub, userId.ToString()),
        new(JwtRegisteredClaimNames.Jti, Guid.NewGuid().ToString()),
        new(JwtRegisteredClaimNames.Iat, 
            new DateTimeOffset(DateTime.UtcNow).ToUnixTimeSeconds().ToString(), 
            ClaimValueTypes.Integer64)
    };

    // Add roles and permissions
    claims.AddRange(roles.Select(role =&gt; new Claim(ClaimTypes.Role, role)));
    claims.AddRange(permissions.Select(permission =&gt; new Claim("permission", permission)));

    var tokenDescriptor = new SecurityTokenDescriptor
    {
        Subject = new ClaimsIdentity(claims),
        Expires = DateTime.UtcNow.AddMinutes(_expirationMinutes),
        Issuer = _issuer,
        Audience = _audience,
        SigningCredentials = new SigningCredentials(
            new SymmetricSecurityKey(key), 
            SecurityAlgorithms.HmacSha256Signature)
    };

    var token = tokenHandler.CreateToken(tokenDescriptor);
    return tokenHandler.WriteToken(token);
}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- ValidateToken Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">‚úÖ ValidateToken</h4>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Valida assinatura e integridade do token JWT, verificando expira√ß√£o e claims obrigat√≥rios.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>ClaimsPrincipal? ValidateToken(string token)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="parameter">
                                <strong>string token</strong><br>
                                <span class="text-sm text-gray-600">Token JWT a ser validado</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Retorno</h5>
                            <div class="return-type">
                                <strong>ClaimsPrincipal?</strong><br>
                                <span class="text-sm">Principal com claims se v√°lido, null se inv√°lido</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Valida√ß√µes Realizadas</h5>
                            <div class="code-block">
<pre>‚Ä¢ Assinatura HMAC-SHA256
‚Ä¢ Tempo de expira√ß√£o
‚Ä¢ Issuer v√°lido
‚Ä¢ Audience v√°lido
‚Ä¢ Estrutura do token
‚Ä¢ Claims obrigat√≥rios</pre>
                            </div>
                        </div>
                    </div>

                    <!-- GetUserIdFromToken Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üë§ GetUserIdFromToken</h4>
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Extrai o ID do usu√°rio de um token v√°lido sem realizar valida√ß√£o completa.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>Guid? GetUserIdFromToken(string token)</pre>
                            </div>
                        </div>

                        <div class="return-type">
                            <strong>Guid?</strong><br>
                            <span class="text-sm">ID do usu√°rio se encontrado, null caso contr√°rio</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PasswordHashService Documentation -->
        <section class="mb-12" id="password-hash-service">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">üîí PasswordHashService</h2>
            
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Vis√£o Geral</h3>
                    <p class="text-gray-600 mb-4">
                        Servi√ßo especializado em hashing seguro de senhas usando algoritmo Argon2id, 
                        considerado o estado da arte em seguran√ßa de passwords.
                    </p>
                    <div class="code-block">
<pre>namespace: GrydAuth.Infrastructure.Services
implements: IPasswordHashService
algorithm: Argon2id
salt: 16 bytes random</pre>
                    </div>
                </div>

                <!-- Configuration -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Configura√ß√£o Argon2id</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="parameter">
                            <strong>MemorySize</strong><br>
                            <span class="text-sm text-gray-600">65536 KB (64 MB) de mem√≥ria</span>
                        </div>
                        <div class="parameter">
                            <strong>Iterations</strong><br>
                            <span class="text-sm text-gray-600">3 itera√ß√µes</span>
                        </div>
                        <div class="parameter">
                            <strong>DegreeOfParallelism</strong><br>
                            <span class="text-sm text-gray-600">1 thread</span>
                        </div>
                        <div class="parameter">
                            <strong>HashLength</strong><br>
                            <span class="text-sm text-gray-600">32 bytes de output</span>
                        </div>
                    </div>
                </div>

                <!-- Methods -->
                <div class="space-y-6">
                    <!-- HashPassword Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üîê HashPassword</h4>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Gera hash seguro da senha usando Argon2id com salt aleat√≥rio √∫nico.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>string HashPassword(string password)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="parameter">
                                <strong>string password</strong><br>
                                <span class="text-sm text-gray-600">Senha em texto plano</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Retorno</h5>
                            <div class="return-type">
                                <strong>string</strong><br>
                                <span class="text-sm">Hash Argon2id em formato base64 com salt inclu√≠do</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Processo de Hashing</h5>
                            <div class="code-block">
<pre>1. Gerar salt aleat√≥rio (16 bytes)
2. Configurar Argon2id com par√¢metros seguros
3. Processar senha + salt
4. Retornar hash em base64</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Implementa√ß√£o</h5>
                            <div class="code-block">
<pre>public string HashPassword(string password)
{
    var salt = new byte[16];
    using (var rng = RandomNumberGenerator.Create())
    {
        rng.GetBytes(salt);
    }

    using var argon2 = new Argon2id(Encoding.UTF8.GetBytes(password))
    {
        Salt = salt,
        MemorySize = 65536, // 64 MB
        Iterations = 3,
        DegreeOfParallelism = 1,
        HashLength = 32
    };

    var hash = argon2.GetBytes(32);
    return Convert.ToBase64String(salt.Concat(hash).ToArray());
}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- VerifyPassword Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">‚úÖ VerifyPassword</h4>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Verifica se uma senha corresponde ao hash armazenado, usando timing-attack resistant comparison.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>bool VerifyPassword(string password, string hash)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Par√¢metros</h5>
                            <div class="space-y-2">
                                <div class="parameter">
                                    <strong>string password</strong><br>
                                    <span class="text-sm text-gray-600">Senha em texto plano para verificar</span>
                                </div>
                                <div class="parameter">
                                    <strong>string hash</strong><br>
                                    <span class="text-sm text-gray-600">Hash armazenado (salt + hash)</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Retorno</h5>
                            <div class="return-type">
                                <strong>bool</strong><br>
                                <span class="text-sm">true se senha correta, false caso contr√°rio</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Processo de Verifica√ß√£o</h5>
                            <div class="code-block">
<pre>1. Extrair salt do hash armazenado (primeiros 16 bytes)
2. Extrair hash original (bytes restantes)
3. Hash da senha fornecida com mesmo salt
4. Compara√ß√£o constant-time dos hashes</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Seguran√ßa</h5>
                            <div class="code-block">
<pre>‚Ä¢ Timing-attack resistant
‚Ä¢ Salt √∫nico por senha
‚Ä¢ Argon2id resistente a GPU/ASIC
‚Ä¢ Mem√≥ria intensiva
‚Ä¢ Configura√ß√£o atual (2025) recomendada</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Continue with more services... -->
        <section class="mb-12" id="rsa-encryption-service">
            <h2 class="text-3xl font-bold text-gray-800 mb-8">üîê RsaEncryptionService</h2>
            
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Vis√£o Geral</h3>
                    <p class="text-gray-600 mb-4">
                        Servi√ßo de criptografia RSA para proteger dados sens√≠veis como refresh tokens. 
                        Utiliza chaves RSA 2048-bit com padding OAEP para m√°xima seguran√ßa.
                    </p>
                    <div class="code-block">
<pre>namespace: GrydAuth.Infrastructure.Services
implements: IEncryptionService
algorithm: RSA-2048 with OAEP padding
key_format: PEM (PKCS#8)</pre>
                    </div>
                </div>

                <!-- Methods -->
                <div class="space-y-6">
                    <!-- Encrypt Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üîí Encrypt</h4>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Criptografa texto usando chave p√∫blica RSA com padding OAEP SHA-256.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>string Encrypt(string plainText)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Retorno</h5>
                            <div class="return-type">
                                <strong>string</strong><br>
                                <span class="text-sm">Texto criptografado em base64</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Limita√ß√µes</h5>
                            <div class="code-block">
<pre>‚Ä¢ M√°ximo 190 bytes de texto (RSA-2048 com OAEP)
‚Ä¢ Uso recomendado para refresh tokens
‚Ä¢ Para dados maiores, usar criptografia h√≠brida</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Decrypt Method -->
                    <div class="method-card">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üîì Decrypt</h4>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Method</span>
                        </div>
                        
                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Descri√ß√£o</h5>
                            <p class="text-gray-600 text-sm">
                                Descriptografa texto usando chave privada RSA correspondente.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Assinatura</h5>
                            <div class="code-block">
<pre>string Decrypt(string encryptedText)</pre>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h5 class="font-medium text-gray-700 mb-2">Tratamento de Erros</h5>
                            <div class="code-block">
<pre>‚Ä¢ CryptographicException para dados inv√°lidos
‚Ä¢ FormatException para base64 malformado
‚Ä¢ Valida√ß√£o de tamanho e formato</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="border-t border-gray-200 pt-8 mt-16">
            <div class="text-center text-gray-600">
                <p class="text-sm">
                    üìö GrydAuth Code Documentation - Vers√£o 1.0.0
                </p>
                <p class="text-xs mt-2">
                    Documenta√ß√£o gerada automaticamente do c√≥digo fonte - √öltima atualiza√ß√£o: 31 de agosto de 2025
                </p>
            </div>
        </footer>
    </main>

    <script>
        // Navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.nav-item');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Smooth scroll to target section
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Highlight current section in navigation
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        const navLink = document.querySelector(`a[href="#${id}"]`);
                        
                        if (navLink) {
                            navLinks.forEach(l => l.classList.remove('active'));
                            navLink.classList.add('active');
                        }
                    }
                });
            }, {
                rootMargin: '-20% 0px -80% 0px'
            });

            // Observe all sections
            document.querySelectorAll('section[id]').forEach(section => {
                observer.observe(section);
            });
        });
    </script>
</body>
</html>
